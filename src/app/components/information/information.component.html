<div class="form-container">
    <h2>Application Info</h2>

    <form [formGroup]="infoForm" class="info-form form-grid">
        <div class="form-group full-width">
            <label class="col-label">Action</label>
            <div class="radio-group">
                <button type="button" class="pill-btn" [class.active]="infoForm.get('action')?.value === 'envInfo'"
                    (click)="infoForm.patchValue({action: 'envInfo'})">
                    Environment Info
                </button>
                <button type="button" class="pill-btn"
                    [class.active]="infoForm.get('action')?.value === 'requestHistory'"
                    (click)="infoForm.patchValue({action: 'requestHistory'})">
                    Request History
                </button>
            </div>
        </div>

        <div class="form-group">
            <label class="col-label">Environment <span class="required">*</span></label>
            <div class="col-input">
                <select formControlName="environment"
                    [class.input-error]="isSubmitted && infoForm.get('environment')?.invalid">
                    <option value="">Select environment</option>
                    <option value="SYST">SYST</option>
                    <option value="UAT">UAT</option>
                    <option value="PROD">PROD</option>
                </select>
                @if (isSubmitted && infoForm.get('environment')?.invalid) {
                <div class="error-msg">Environment is required</div>
                }
            </div>
        </div>

        <div class="form-group">
            <label class="col-label">Application <span class="required">*</span></label>
            <div class="col-input">
                <select formControlName="application"
                    [class.input-error]="isSubmitted && infoForm.get('application')?.invalid">
                    <option value="">Select application</option>
                    <option value="ivr.war">ivr.war</option>
                    <option value="claims.ear">claims.ear</option>
                </select>
                @if (isSubmitted && infoForm.get('application')?.invalid) {
                <div class="error-msg">Application is required</div>
                }
            </div>
        </div>

        <div class="form-actions full-width">
            <button type="button" class="deploy-btn" (click)="onSubmit()">
                Submit
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
            </button>
        </div>
    </form>

    @if (showTable) {
    <app-shared-table [data]="tableData" [columns]="tableCols"></app-shared-table>
    }

    <div class="toast-notification" [class.show]="toastVisible" [class.error]="toastType === 'error'">
        <div class="toast-icon">
            <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="3" fill="none"
                stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12" y2="17"></line>
            </svg>
        </div>
        <span class="toast-message">{{ toastMessage }}</span>
        <button class="toast-close" (click)="closeToast()">
            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
</div>